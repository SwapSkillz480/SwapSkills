{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-4">
    <h4 class="" style="color:#ff9800;"><i class="bi bi-person-circle"></i> Profile Summary</h4>
    {% if user.profile %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">{{ user.username }}</h5>
          <p class="card-text"><strong><i class="bi bi-geo-alt"></i> Location:</strong> {{ user.profile.location }}</p>
          <p class="card-text"><strong><i class="bi bi-lightbulb"></i> Skills Offered:</strong> {{ user.profile.skills_offered }}</p>
          <p class="card-text"><strong><i class="bi bi-lightning"></i> Skills Wanted:</strong> {{ user.profile.skills_wanted }}</p>
          <a href="{% url 'view_profile' %}" class="btn btn-primary btn-sm"><i class="bi bi-eye"></i> View Profile</a>
          <a href="{% url 'edit_profile' %}" class="btn btn-secondary btn-sm"><i class="bi bi-pencil"></i> Edit Profile</a>
        </div>
      </div>
    {% else %}
      <div class="alert alert-warning">No profile found. <a href="{% url 'edit_profile' %}">Create Profile</a></div>
    {% endif %}
  </div>
  <div class="col-md-4">
    <h4 class="text-success"><i class="bi bi-inbox"></i> Received Swap Requests</h4>
    <ul class="list-group mb-3">
      {% for swap in received_swaps %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span><i class="bi bi-person"></i> From: {{ swap.from_user.username }}<br><i class="bi bi-lightbulb"></i> Wants: {{ swap.skill_requested_by_sender }}<br><i class="bi bi-lightbulb-fill"></i> Offers: {{ swap.skill_offered_by_sender }}<br><i class="bi bi-info-circle"></i> Status: {{ swap.status }}</span>
          <a href="{% url 'request_detail' swap.pk %}" class="btn btn-info btn-sm"><i class="bi bi-info-circle"></i> Details</a>
        </li>
      {% empty %}
        <li class="list-group-item">No received requests.</li>
      {% endfor %}
    </ul>
    <a href="{% url 'swap_requests' %}" class="btn btn-link" style="color:#ff9800;"><i class="bi bi-list"></i> Manage All</a>
  </div>
  <div class="col-md-4">
    <h4 class="text-warning"><i class="bi bi-send"></i> Sent Swap Requests</h4>
    <ul class="list-group mb-3">
      {% for swap in sent_swaps %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span><i class="bi bi-person"></i> To: {{ swap.to_user.username }}<br><i class="bi bi-lightbulb"></i> Wants: {{ swap.skill_requested_by_sender }}<br><i class="bi bi-lightbulb-fill"></i> Offers: {{ swap.skill_offered_by_sender }}<br><i class="bi bi-info-circle"></i> Status: {{ swap.status }}</span>
          <a href="{% url 'request_detail' swap.pk %}" class="btn btn-info btn-sm"><i class="bi bi-info-circle"></i> Details</a>
        </li>
      {% empty %}
        <li class="list-group-item">No sent requests.</li>
      {% endfor %}
    </ul>
    <a href="{% url 'swap_requests' %}" class="btn btn-link" style="color:#ff9800;"><i class="bi bi-list"></i> Manage All</a>
  </div>
</div>
<hr>
<form method="get" action="{% url 'search_skills' %}" class="mb-3">
  <div class="input-group">
    <input type="text" name="q" class="form-control" placeholder="Search skills..." value="{{ request.GET.q }}">
    <button type="submit" class="btn btn-primary"><i class="bi bi-search"></i> Search</button>
  </div>
</form>
{% endblock %} 